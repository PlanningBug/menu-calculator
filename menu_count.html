<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>메뉴별 합계 계산기</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
            background-color: #f9f9f9;
        }
        textarea {
            width: 100%;
            height: 300px;
            padding: 10px;
            font-size: 14px;
        }
        button {
            margin-top: 10px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }
        table {
            margin-top: 20px;
            border-collapse: collapse;
            width: 60%;
        }
        th, td {
            border: 1px solid #ccc;
            padding: 8px 12px;
            text-align: left;
        }
        th {
            background-color: #eee;
        }
    </style>
</head>
<body>

<h2>메뉴별 합계 계산기</h2>

<p>데이터를 붙여넣고 "확인" 버튼을 누르세요:</p>
<textarea id="dataInput" placeholder="여기에 데이터를 붙여넣으세요..."></textarea>
<br>
<button onclick="calculateMenu()">확인</button>

<div id="result"></div>

<script>
function calculateMenu() {
    const rawData = document.getElementById('dataInput').value;
    if (!rawData.trim()) {
        alert("데이터를 입력해주세요!");
        return;
    }

    const lines = rawData.split('\n');
    const menuCount = {};

    lines.forEach(line => {
        // 1. 날짜 제거
        line = line.replace(/2025-\d{2}-\d{2}/g, '').trim();

        // 2. 띄어쓰기 3개를 콤마로 변경
        line = line.replace(/ {3}/g, ',');

        // 3. 메뉴별 분리
        const items = line.split(',').map(item => item.trim());
        items.forEach(item => {
            if (!item) return;
            let name = item;
            let count = 1;

            const match = item.match(/^(.+)x(\d+)$/);
            if (match) {
                name = match[1].trim();
                count = parseInt(match[2]);
            }

            if (menuCount[name]) {
                menuCount[name] += count;
            } else {
                menuCount[name] = count;
            }
        });
    });

    // 4. 테이블 생성
    let tableHTML = '<table><tr><th>메뉴</th><th>개수</th></tr>';
    Object.entries(menuCount)
          .sort((a,b) => b[1] - a[1])
          .forEach(([menu, count]) => {
        tableHTML += `<tr><td>${menu}</td><td>${count}</td></tr>`;
    });
    tableHTML += '</table>';

    document.getElementById('result').innerHTML = tableHTML;
}
</script>

</body>
</html>
